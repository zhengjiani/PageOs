# -*- coding: UTF-8 -*-
from tomd import Tomd
html = """
<p>MySQL基本查询【3/29】</p>
<p>单表查询、带IN关键字的查询、带BETWEEN AND的范围查询、带LIKE的字符匹配查询、带AND的多条件查询等</p>
<a id="more"></a>
<p>MySQL基础查询【3月29日】</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT &#123;* | &lt;字段列表&gt;&#125;</span><br><span class="line">		[</span><br><span class="line">            FROM &lt;表1&gt;,&lt;表2&gt;...</span><br><span class="line">            [WHERE &lt;表达式&gt;]</span><br><span class="line">            [GROUP BY &lt;group by definition&gt;]</span><br><span class="line">            [HAVING &lt;expression&gt; [&#123;&lt;operator&gt; &lt;expression&gt;&#125;...]]</span><br><span class="line">            [ORDER BY &lt;order by definition&gt;]</span><br><span class="line">            [LIMIT [&lt;offset&gt;,] &lt;row count&gt;]</span><br><span class="line">		]</span><br><span class="line">SELECT [字段1，字段2，...，字段n]</span><br><span class="line">FROM [表或视图]</span><br><span class="line">WHERE [查询条件]</span><br></pre></td></tr></table></figure>
<p>{* | &lt;字段列表&gt;}包含星号通配符选字段列表，表示查询的字段，其中字段列表至少包含一个字段名称，如果要查询多个字段，多个字段之间用“，”隔开，最后一个字段不加逗号。</p>
<p><strong>FROM</strong> &lt;表1&gt;,&lt;表2&gt;…，表1和表2表示<strong>查询数据的来源</strong>，可以是单个或多个。</p>
<p><strong>WHERE</strong>子句是可选项，如果选择该项，将限定查询行必须满足的<strong>查询条件</strong>。</p>
<p><strong>GROUP BY</strong>&lt;字段&gt;，如何显示查询出来的数据，并按照指定的字段<strong>分组</strong>。</p>
<p>[<strong>ORDER BY</strong>&lt;字段&gt;]按什么样的<strong>顺序</strong>显示查询出来的数据，可以进行的排序有：<strong>升序(ASC)，降序(DESC)</strong></p>
<p>[<strong>LIMIT</strong> [\<offset>,] \<row count>]每次显示查询出来的<strong>数据条数</strong>。</row></offset></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_id, f_name FROM fruits;</span><br><span class="line">+------+-----------+</span><br><span class="line">| f_id | f_name    |</span><br><span class="line">+------+-----------+</span><br><span class="line">| a1   | apple     |</span><br><span class="line">| a2   | apricot   |</span><br><span class="line">| b1   | blckberry |</span><br><span class="line">| b2   | berry     |</span><br><span class="line">| b5   | xxxx      |</span><br><span class="line">| bs1  | orange    |</span><br><span class="line">| bs2  | melon     |</span><br><span class="line">| c0   | cherry    |</span><br><span class="line">| l2   | lemon     |</span><br><span class="line">| m1   | mango     |</span><br><span class="line">| m2   | xbabay    |</span><br><span class="line">| m3   | xxtt      |</span><br><span class="line">| o2   | cocount   |</span><br><span class="line">| t1   | banana    |</span><br><span class="line">| t2   | grape     |</span><br><span class="line">| t4   | xbababa   |</span><br><span class="line">+------+-----------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>显示的顺序为添加到表中的顺序。</p>
<ul>
<li>单表查询：</li>
</ul>
<p>查询所有字段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 表名；</span><br></pre></td></tr></table></figure>
<p>查询指定字段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名 FROM 表名；</span><br></pre></td></tr></table></figure>
<p>查询指定记录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段1,字段2,...,字段名n FROM 表名 WHERE 查询条件</span><br></pre></td></tr></table></figure>
<p>WHERE 条件判断符</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>相等</td>
</tr>
<tr>
<td>&lt;&gt;,!=</td>
<td>不相等</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>>=</td>
<td>大于或者等于</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>位于两值之间</td>
</tr>
</tbody>
</table>
<p>比较数字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name,f_price FROM fruits WHERE f_price = 10.2;</span><br></pre></td></tr></table></figure>
<p>比较字符串：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name,f_price FROM fruits WHERE f_name = &apos;apple&apos;;</span><br></pre></td></tr></table></figure>
<ul>
<li>带IN关键字的查询：</li>
</ul>
<p>查询满足指定条件范围的记录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,f_name,f_price FROM fruits WHERE s_id IN (101,102) ORDER BY f_name;</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">| s_id | f_name    | f_price |</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">|  101 | apple     |    5.20 |</span><br><span class="line">|  102 | banana    |   10.30 |</span><br><span class="line">|  101 | blckberry |   10.20 |</span><br><span class="line">|  101 | cherry    |    3.20 |</span><br><span class="line">|  102 | grape     |    5.30 |</span><br><span class="line">|  102 | orange    |   11.30 |</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询不在指定范围内的记录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,f_name,f_price FROM fruits WHERE s_id NOT IN (101,102) ORDER BY f_name;</span><br><span class="line">+------+---------+---------+</span><br><span class="line">| s_id | f_name  | f_price |</span><br><span class="line">+------+---------+---------+</span><br><span class="line">|  103 | apricot |    2.20 |</span><br><span class="line">|  104 | berry   |    7.60 |</span><br><span class="line">|  103 | cocount |    9.20 |</span><br><span class="line">|  104 | lemon   |    6.40 |</span><br><span class="line">|  106 | mango   |   15.60 |</span><br><span class="line">|  105 | melon   |    8.20 |</span><br><span class="line">|  107 | xbababa |    3.60 |</span><br><span class="line">|  105 | xbabay  |    2.60 |</span><br><span class="line">|  105 | xxtt    |   11.60 |</span><br><span class="line">|  107 | xxxx    |    3.60 |</span><br><span class="line">+------+---------+---------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>带BETWEEN AND的范围查询</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name,f_price FROM fruits WHERE f_price BETWEEN 2.00 AND 10.20;</span><br><span class="line">+-----------+---------+</span><br><span class="line">| f_name    | f_price |</span><br><span class="line">+-----------+---------+</span><br><span class="line">| apple     |    5.20 |</span><br><span class="line">| apricot   |    2.20 |</span><br><span class="line">| blckberry |   10.20 |</span><br><span class="line">| berry     |    7.60 |</span><br><span class="line">| xxxx      |    3.60 |</span><br><span class="line">| melon     |    8.20 |</span><br><span class="line">| cherry    |    3.20 |</span><br><span class="line">| lemon     |    6.40 |</span><br><span class="line">| xbabay    |    2.60 |</span><br><span class="line">| cocount   |    9.20 |</span><br><span class="line">| grape     |    5.30 |</span><br><span class="line">| xbababa   |    3.60 |</span><br><span class="line">+-----------+---------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name,f_price FROM fruits WHERE f_price NOT BETWEEN 2.00 AND 10.20;</span><br><span class="line">+--------+---------+</span><br><span class="line">| f_name | f_price |</span><br><span class="line">+--------+---------+</span><br><span class="line">| orange |   11.30 |</span><br><span class="line">| mango  |   15.60 |</span><br><span class="line">| xxtt   |   11.60 |</span><br><span class="line">| banana |   10.30 |</span><br><span class="line">+--------+---------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>带LIKE的字符匹配查询：</li>
</ul>
<p><strong>‘%’</strong>匹配任意长度的字符，甚至包括0字符，<strong>‘_’</strong>一次只能匹配任意一个字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_id,f_name FROM fruits WHERE f_name LIKE &apos;b%&apos;;</span><br><span class="line">+------+-----------+</span><br><span class="line">| f_id | f_name    |</span><br><span class="line">+------+-----------+</span><br><span class="line">| b1   | blckberry |</span><br><span class="line">| b2   | berry     |</span><br><span class="line">| t1   | banana    |</span><br><span class="line">+------+-----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; SELECT f_id,f_name FROM fruits WHERE f_name LIKE &apos;____y&apos;;</span><br><span class="line">+------+--------+</span><br><span class="line">| f_id | f_name |</span><br><span class="line">+------+--------+</span><br><span class="line">| b2   | berry  |</span><br><span class="line">+------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询表结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; describe fruits;</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| f_id    | char(10)     | NO   | PRI | NULL    |       |</span><br><span class="line">| s_id    | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| f_name  | char(255)    | NO   |     | NULL    |       |</span><br><span class="line">| f_price | decimal(8,2) | NO   |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>查询空值：空值指数据未知，不适用或将在以后添加数据</p>
<p>查询计数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(*) AS cust_num FROM customers;</span><br><span class="line">+----------+</span><br><span class="line">| cust_num |</span><br><span class="line">+----------+</span><br><span class="line">|        4 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询空值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT c_id,c_name,c_email FROM customers WHERE c_email IS NULL;</span><br><span class="line">+-------+----------+---------+</span><br><span class="line">| c_id  | c_name   | c_email |</span><br><span class="line">+-------+----------+---------+</span><br><span class="line">| 10003 | Netbhood | NULL    |</span><br><span class="line">+-------+----------+---------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询字段不为空的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT c_id,c_name,c_email FROM customers WHERE c_email IS NOT NULL;</span><br><span class="line">+-------+---------+-------------------+</span><br><span class="line">| c_id  | c_name  | c_email           |</span><br><span class="line">+-------+---------+-------------------+</span><br><span class="line">| 10001 | RedHook | LiMing@163.com    |</span><br><span class="line">| 10002 | Stars   | Jerry@hotmail.com |</span><br><span class="line">| 10004 | JOTO    | sam@hotmail.com   |</span><br><span class="line">+-------+---------+-------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>带AND的多条件查询：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_id,f_price,f_name FROM fruits WHERE s_id = &apos;101&apos; AND f_price &gt;=5;</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">| f_id | f_price | f_name    |</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">| a1   |    5.20 | apple     |</span><br><span class="line">| b1   |   10.20 | blckberry |</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>带OR的多条件查询，只要满足其中一个条件记录即返回</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,f_price,f_name FROM fruits WHERE s_id = 101 OR s_id = 102;</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">| s_id | f_price | f_name    |</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">|  101 |    5.20 | apple     |</span><br><span class="line">|  101 |   10.20 | blckberry |</span><br><span class="line">|  102 |   11.30 | orange    |</span><br><span class="line">|  101 |    3.20 | cherry    |</span><br><span class="line">|  102 |   10.30 | banana    |</span><br><span class="line">|  102 |    5.30 | grape     |</span><br><span class="line">+------+---------+-----------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>OR操作符和IN操作符作用效果一样，但IN快一些，且可以执行更加复杂的嵌套查询。</p>
<p>AND的优先级高于OR，因此先对AND两边的操作数进行操作，再与OR中操作数结合。</p>
<ul>
<li>去重复操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT DISTINCT s_id FROM fruits;</span><br><span class="line">+------+</span><br><span class="line">| s_id |</span><br><span class="line">+------+</span><br><span class="line">|  101 |</span><br><span class="line">|  103 |</span><br><span class="line">|  104 |</span><br><span class="line">|  107 |</span><br><span class="line">|  102 |</span><br><span class="line">|  105 |</span><br><span class="line">|  106 |</span><br><span class="line">+------+</span><br></pre></td></tr></table></figure>
<p>对查询结果进行排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name FROM fruits ORDER BY f_name;</span><br><span class="line">+-----------+</span><br><span class="line">| f_name    |</span><br><span class="line">+-----------+</span><br><span class="line">| apple     |</span><br><span class="line">| apricot   |</span><br><span class="line">| banana    |</span><br><span class="line">| berry     |</span><br><span class="line">| blckberry |</span><br><span class="line">| cherry    |</span><br><span class="line">| cocount   |</span><br><span class="line">| grape     |</span><br><span class="line">| lemon     |</span><br><span class="line">| mango     |</span><br><span class="line">| melon     |</span><br><span class="line">| orange    |</span><br><span class="line">| xbababa   |</span><br><span class="line">| xbabay    |</span><br><span class="line">| xxtt      |</span><br><span class="line">| xxxx      |</span><br><span class="line">+-----------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>多列排序</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f_name,f_price FROM fruits ORDER BY f_name,f_price;</span><br><span class="line">+-----------+---------+</span><br><span class="line">| f_name    | f_price |</span><br><span class="line">+-----------+---------+</span><br><span class="line">| apple     |    5.20 |</span><br><span class="line">| apricot   |    2.20 |</span><br><span class="line">| banana    |   10.30 |</span><br><span class="line">| berry     |    7.60 |</span><br><span class="line">| blckberry |   10.20 |</span><br><span class="line">| cherry    |    3.20 |</span><br><span class="line">| cocount   |    9.20 |</span><br><span class="line">| grape     |    5.30 |</span><br><span class="line">| lemon     |    6.40 |</span><br><span class="line">| mango     |   15.60 |</span><br><span class="line">| melon     |    8.20 |</span><br><span class="line">| orange    |   11.30 |</span><br><span class="line">| xbababa   |    3.60 |</span><br><span class="line">| xbabay    |    2.60 |</span><br><span class="line">| xxtt      |   11.60 |</span><br><span class="line">| xxxx      |    3.60 |</span><br><span class="line">+-----------+---------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有的值都是唯一的，将不再对第二列进行排序。</p>
<p><strong>在排序的时候(ASC)为默认的排序方式。</strong></p>
<p>先按f_price降序排序，再将f_name字段升序排序</p>
<p><strong>如果要对多列进行降序排序，必须要在每一列的列名后面加DESC关键字</strong></p>
<p>分组查询</p>
<p>GROUP BY 通常与集合函数一起使用：<strong>MAX(),MIN(),COUNT(),SUM(),AVG()</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,COUNT(*) AS Total FROM fruits GROUP BY s_id;</span><br><span class="line">+------+-------+</span><br><span class="line">| s_id | Total |</span><br><span class="line">+------+-------+</span><br><span class="line">|  101 |     3 |</span><br><span class="line">|  102 |     3 |</span><br><span class="line">|  103 |     2 |</span><br><span class="line">|  104 |     2 |</span><br><span class="line">|  105 |     3 |</span><br><span class="line">|  106 |     1 |</span><br><span class="line">|  107 |     2 |</span><br><span class="line">+------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>显示每个分组的各个字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,GROUP_CONCAT(f_name) AS Names FROM fruits GROUP BY s_id;</span><br><span class="line">+------+------------------------+</span><br><span class="line">| s_id | Names                  |</span><br><span class="line">+------+------------------------+</span><br><span class="line">|  101 | apple,blckberry,cherry |</span><br><span class="line">|  102 | orange,banana,grape    |</span><br><span class="line">|  103 | apricot,cocount        |</span><br><span class="line">|  104 | berry,lemon            |</span><br><span class="line">|  105 | melon,xbabay,xxtt      |</span><br><span class="line">|  106 | mango                  |</span><br><span class="line">|  107 | xxxx,xbababa           |</span><br><span class="line">+------+------------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>使用HAVIING过滤分组</li>
</ul>
<p>显示水果种类大于1的分组信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,GROUP_CONCAT(f_name) AS Names FROM fruits GROUP BY s_id HAVING COUNT(f_name)&gt;1;</span><br><span class="line">+------+------------------------+</span><br><span class="line">| s_id | Names                  |</span><br><span class="line">+------+------------------------+</span><br><span class="line">|  101 | apple,blckberry,cherry |</span><br><span class="line">|  102 | orange,banana,grape    |</span><br><span class="line">|  103 | apricot,cocount        |</span><br><span class="line">|  104 | berry,lemon            |</span><br><span class="line">|  105 | melon,xbabay,xxtt      |</span><br><span class="line">|  107 | xxxx,xbababa           |</span><br><span class="line">+------+------------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>HAVING和WHERE 过滤数据的区别</p>
<p>HAVING在数据分组之后进行过滤，WHERE分组之前用来选择记录，WHERE排除的记录将不包含在分组中</p>
<p>使用WITH ROLLUP，在所有查询出的分组记录之后增加一条记录，该记录计算查询出的所有记录的总和，统计记录数量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,COUNT(*) AS TOTAL FROM fruits GROUP BY s_id WITH ROLLUP;</span><br><span class="line">+------+-------+</span><br><span class="line">| s_id | TOTAL |</span><br><span class="line">+------+-------+</span><br><span class="line">|  101 |     3 |</span><br><span class="line">|  102 |     3 |</span><br><span class="line">|  103 |     2 |</span><br><span class="line">|  104 |     2 |</span><br><span class="line">|  105 |     3 |</span><br><span class="line">|  106 |     1 |</span><br><span class="line">|  107 |     2 |</span><br><span class="line">| NULL |    16 |</span><br><span class="line">+------+-------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>多字段分组，分组层次从左至右，先按第一个字段分组，然后在第一个字段值相同的记录中，再根据第2个字段的值进行分组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits GROUP BY s_id,f_name;</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| f_id | s_id | f_name    | f_price |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| a1   |  101 | apple     |    5.20 |</span><br><span class="line">| b1   |  101 | blckberry |   10.20 |</span><br><span class="line">| c0   |  101 | cherry    |    3.20 |</span><br><span class="line">| t1   |  102 | banana    |   10.30 |</span><br><span class="line">| t2   |  102 | grape     |    5.30 |</span><br><span class="line">| bs1  |  102 | orange    |   11.30 |</span><br><span class="line">| a2   |  103 | apricot   |    2.20 |</span><br><span class="line">| o2   |  103 | cocount   |    9.20 |</span><br><span class="line">| b2   |  104 | berry     |    7.60 |</span><br><span class="line">| l2   |  104 | lemon     |    6.40 |</span><br><span class="line">| bs2  |  105 | melon     |    8.20 |</span><br><span class="line">| m2   |  105 | xbabay    |    2.60 |</span><br><span class="line">| m3   |  105 | xxtt      |   11.60 |</span><br><span class="line">| m1   |  106 | mango     |   15.60 |</span><br><span class="line">| t4   |  107 | xbababa   |    3.60 |</span><br><span class="line">| b5   |  107 | xxxx      |    3.60 |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">16 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<h2 id="2019年3月31日更新"><a href="#2019年3月31日更新" class="headerlink" title="2019年3月31日更新"></a>2019年3月31日更新</h2><p>GROUP BY和ORDER BY进行分组排序</p>
<p>表结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Database changed</span><br><span class="line">mysql&gt; CREATE TABLE orderitems</span><br><span class="line">    -&gt; (</span><br><span class="line">    -&gt; o_num int NOT NULL,</span><br><span class="line">    -&gt; o_item int NOT NULL,</span><br><span class="line">    -&gt; f_id char(10) NOT NULL,</span><br><span class="line">    -&gt; quantity int NOT NULL,</span><br><span class="line">    -&gt; item_price decimal(8,2) NOT NULL,</span><br><span class="line">    -&gt; PRIMARY KEY (o_num,o_item));</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO orderitems(o_num,o_item,f_id,quantity,item_price)</span><br><span class="line">    -&gt; VALUES(30001,1,&apos;a1&apos;,10,5.2),</span><br><span class="line">    -&gt; (30001,2,&apos;b2&apos;,3,7.6),</span><br><span class="line">    -&gt; (30001,3,&apos;bs1&apos;,5,11.2),</span><br><span class="line">    -&gt; (30001,4,&apos;bs2&apos;,15,9.2),</span><br><span class="line">    -&gt; (30002,1,&apos;b3&apos;,2,20.0),</span><br><span class="line">    -&gt; (30003,1,&apos;c0&apos;,100,10),</span><br><span class="line">    -&gt; (30004,1,&apos;o2&apos;,50,2.50),</span><br><span class="line">    -&gt; (30005,1,&apos;c0&apos;,5,10),</span><br><span class="line">    -&gt; (30005,2,&apos;b1&apos;,10,8.99),</span><br><span class="line">    -&gt; (30005,3,&apos;a2&apos;,10,2.2),</span><br><span class="line">    -&gt; (30005,4,&apos;m1&apos;,5,14.99);</span><br><span class="line">Query OK, 11 rows affected (0.01 sec)</span><br><span class="line">Records: 11  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<p>查询订单价格大于100的订单号和总订单价格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT o_num,SUM(quantity*item_price) AS order_total FROM orderitems GROUP BY o_num HAVING SUM(quantity*item_price)&gt;=100;</span><br><span class="line">+-------+-------------+</span><br><span class="line">| o_num | order_total |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 30001 |      268.80 |</span><br><span class="line">| 30003 |     1000.00 |</span><br><span class="line">| 30004 |      125.00 |</span><br><span class="line">| 30005 |      236.85 |</span><br><span class="line">+-------+-------------+</span><br></pre></td></tr></table></figure>
<p>对order_total进行排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT o_num,SUM(quantity*item_price) AS order_total FROM orderitems GROUP BY o_num HAVING SUM(quantity*item_price)&gt;=100 ORDER BY order_total;</span><br><span class="line">+-------+-------------+</span><br><span class="line">| o_num | order_total |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 30004 |      125.00 |</span><br><span class="line">| 30005 |      236.85 |</span><br><span class="line">| 30001 |      268.80 |</span><br><span class="line">| 30003 |     1000.00 |</span><br><span class="line">+-------+-------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ROLLUP和ORDER BY是互斥的</p>
<p>使用LIMIT限制查询结果的数量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT [位置偏移量,] 行数</span><br></pre></td></tr></table></figure>
<p>第一条记录的位置偏移量是0</p>
<p>查前4行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits LIMIT 4;</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| f_id | s_id | f_name    | f_price |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| a1   |  101 | apple     |    5.20 |</span><br><span class="line">| a2   |  103 | apricot   |    2.20 |</span><br><span class="line">| b1   |  101 | blckberry |   10.20 |</span><br><span class="line">| b2   |  104 | berry     |    7.60 |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>从第5个记录开始，行数长度为3的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits LIMIT 4,3;</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">| f_id | s_id | f_name | f_price |</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">| b5   |  107 | xxxx   |    3.60 |</span><br><span class="line">| bs1  |  102 | orange |   11.30 |</span><br><span class="line">| bs2  |  105 | melon  |    8.20 |</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>MySQL聚合函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>AVG()</td>
<td>返回某列的平均值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>返回某列的行数</td>
</tr>
<tr>
<td>MAX()</td>
<td>返回某列的最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>返回某列的最小值</td>
</tr>
<tr>
<td>SUM()</td>
<td>返回某列值的和</td>
</tr>
</tbody>
</table>
<p>【计算某一字段总的行数，忽略空值的行】查询customers表中有电子邮箱的顾客的总数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(c_email) AS email_num FROM customers;</span><br><span class="line">+-----------+</span><br><span class="line">| email_num |</span><br><span class="line">+-----------+</span><br><span class="line">|         3 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>【COUNT(*)不忽略记录中的空值行】</p>
<p>SUM计算每个分组中记录的总和，忽略空值行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT o_num,SUM(quantity) AS items_total FROM orderitems GROUP BY o_num;</span><br><span class="line">+-------+-------------+</span><br><span class="line">| o_num | items_total |</span><br><span class="line">+-------+-------------+</span><br><span class="line">| 30001 |          33 |</span><br><span class="line">| 30002 |           2 |</span><br><span class="line">| 30003 |         100 |</span><br><span class="line">| 30004 |          50 |</span><br><span class="line">| 30005 |          30 |</span><br><span class="line">+-------+-------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>AVG()求指定列数据的平均值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT AVG(f_price) AS avg_price FROM fruits WHERE s_id =103;</span><br><span class="line">+-----------+</span><br><span class="line">| avg_price |</span><br><span class="line">+-----------+</span><br><span class="line">|  5.700000 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>如果多列求多个平均值，则每一列都要用AVG函数</p>
<p>查找不同供应商提供的价格最高的水果值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,MAX(f_price) AS max_price FROM fruits GROUP BY s_id;</span><br><span class="line">+------+-----------+</span><br><span class="line">| s_id | max_price |</span><br><span class="line">+------+-----------+</span><br><span class="line">|  101 |     10.20 |</span><br><span class="line">|  102 |     11.30 |</span><br><span class="line">|  103 |      9.20 |</span><br><span class="line">|  104 |      7.60 |</span><br><span class="line">|  105 |     11.60 |</span><br><span class="line">|  106 |     15.60 |</span><br><span class="line">|  107 |      3.60 |</span><br><span class="line">+------+-----------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>MAX可以返回字符的最大值，按ASCII码值，先比较第一个字母，如果相等，继续比较下一个，一直到两个字符不相等或者字符结束为止。</p>
<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><p>当两个或多个表中存在相同意义的字段时，便可以通过这些字段对不同的表进行连接查询</p>
<p>内连接（INNER JOIN）使用比较运算符进行表间某些列数据的比较操作，并列出这些表中与连接条件相匹配的数据行，组合成新的记录。</p>
<p>俩个表都具有相同字段s_id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DESC fruits;</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| f_id    | char(10)     | NO   | PRI | NULL    |       |</span><br><span class="line">| s_id    | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| f_name  | char(255)    | NO   |     | NULL    |       |</span><br><span class="line">| f_price | decimal(8,2) | NO   |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; DESC suppliers;</span><br><span class="line">+--------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field  | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+--------+----------+------+-----+---------+----------------+</span><br><span class="line">| s_id   | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| s_name | char(50) | NO   |     | NULL    |                |</span><br><span class="line">| s_city | char(50) | YES  |     | NULL    |                |</span><br><span class="line">| s_zip  | char(10) | YES  |     | NULL    |                |</span><br><span class="line">| s_call | char(50) | NO   |     | NULL    |                |</span><br><span class="line">+--------+----------+------+-----+---------+----------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>从fruits表中查f_name、f_price字段，从suppliers表中查询s_id、s_name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT suppliers.s_id,s_name,f_name,f_price FROM fruits,suppliers WHERE fruits.s_id = suppliers.s_id;</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">| s_id | s_name         | f_name    | f_price |</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">|  101 | FastFruit Inc. | apple     |    5.20 |</span><br><span class="line">|  103 | ACME           | apricot   |    2.20 |</span><br><span class="line">|  101 | FastFruit Inc. | blckberry |   10.20 |</span><br><span class="line">|  104 | FNK Inc.       | berry     |    7.60 |</span><br><span class="line">|  107 | DK Inc         | xxxx      |    3.60 |</span><br><span class="line">|  102 | LT Supplies    | orange    |   11.30 |</span><br><span class="line">|  105 | Good Set.      | melon     |    8.20 |</span><br><span class="line">|  101 | FastFruit Inc. | cherry    |    3.20 |</span><br><span class="line">|  104 | FNK Inc.       | lemon     |    6.40 |</span><br><span class="line">|  106 | Just Eat Ours  | mango     |   15.60 |</span><br><span class="line">|  105 | Good Set.      | xbabay    |    2.60 |</span><br><span class="line">|  105 | Good Set.      | xxtt      |   11.60 |</span><br><span class="line">|  103 | ACME           | cocount   |    9.20 |</span><br><span class="line">|  102 | LT Supplies    | banana    |   10.30 |</span><br><span class="line">|  102 | LT Supplies    | grape     |    5.30 |</span><br><span class="line">|  107 | DK Inc         | xbababa   |    3.60 |</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">16 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>使用内连接进行查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT suppliers.s_id,s_name,f_name,f_price FROM fruits,suppliers WHERE fruits.s_id = suppliers.s_id;</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">| s_id | s_name         | f_name    | f_price |</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">|  101 | FastFruit Inc. | apple     |    5.20 |</span><br><span class="line">|  103 | ACME           | apricot   |    2.20 |</span><br><span class="line">|  101 | FastFruit Inc. | blckberry |   10.20 |</span><br><span class="line">|  104 | FNK Inc.       | berry     |    7.60 |</span><br><span class="line">|  107 | DK Inc         | xxxx      |    3.60 |</span><br><span class="line">|  102 | LT Supplies    | orange    |   11.30 |</span><br><span class="line">|  105 | Good Set.      | melon     |    8.20 |</span><br><span class="line">|  101 | FastFruit Inc. | cherry    |    3.20 |</span><br><span class="line">|  104 | FNK Inc.       | lemon     |    6.40 |</span><br><span class="line">|  106 | Just Eat Ours  | mango     |   15.60 |</span><br><span class="line">|  105 | Good Set.      | xbabay    |    2.60 |</span><br><span class="line">|  105 | Good Set.      | xxtt      |   11.60 |</span><br><span class="line">|  103 | ACME           | cocount   |    9.20 |</span><br><span class="line">|  102 | LT Supplies    | banana    |   10.30 |</span><br><span class="line">|  102 | LT Supplies    | grape     |    5.30 |</span><br><span class="line">|  107 | DK Inc         | xbababa   |    3.60 |</span><br><span class="line">+------+----------------+-----------+---------+</span><br><span class="line">16 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>在一个连接查询中，涉及到的两个表都是同一个表，这种查询称为自连接查询。</p>
<p>查询供应f_id = ‘a1’的水果供应商提供的其他水果种类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT f1.f_id,f1.f_name FROM fruits AS f1,fruits AS f2 WHERE f1.s_id = f2.s_id AND f2.f_id = &apos;a1&apos;;</span><br><span class="line">+------+-----------+</span><br><span class="line">| f_id | f_name    |</span><br><span class="line">+------+-----------+</span><br><span class="line">| a1   | apple     |</span><br><span class="line">| b1   | blckberry |</span><br><span class="line">| c0   | cherry    |</span><br><span class="line">+------+-----------+</span><br><span class="line">3 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p> 外连接</p>
<p>LEFT JOIN(左连接)：返回包括左表中的所有记录和右表中连接字段相等的记录</p>
<p>RIGHT JOIN(右连接)：返回包括右表中的所有记录和左表中连接字段相等的记录</p>
<p><strong>左连接的结果包括LEFT OUTER子句中指定的左表的所有行，而不仅仅是连接列所匹配的行。如果左表的某行在右表中没有匹配行，则在相关联的结果行中，右表中的所有选择列表列均为空值。</strong></p>
<p>查询所有客户，包括没有订单的客户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT customers.c_id,orders.o_num FROM customers LEFT OUTER JOIN orders ON customers.c_id = orders.c_id;</span><br><span class="line">+-------+-------+</span><br><span class="line">| c_id  | o_num |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 10001 | 30001 |</span><br><span class="line">| 10003 | 30002 |</span><br><span class="line">| 10004 | 30003 |</span><br><span class="line">| 10001 | 30005 |</span><br><span class="line">| 10002 |  NULL |</span><br><span class="line">+-------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询所有订单，包括没有客户的订单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT customers.c_id,orders.o_num FROM customers RIGHT OUTER JOIN orders ON customers.c_id = orders.c_id;</span><br><span class="line">+-------+-------+</span><br><span class="line">| c_id  | o_num |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 10001 | 30001 |</span><br><span class="line">| 10003 | 30002 |</span><br><span class="line">| 10004 | 30003 |</span><br><span class="line">|  NULL | 30004 |</span><br><span class="line">| 10001 | 30005 |</span><br><span class="line">+-------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>复合条件连接查询</p>
<p>通过添加过滤条件，限制查询结果</p>
<p>查询customers表中ID为10001的客户的订单信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT customers.c_id,orders.o_num FROM customers INNER JOIN orders ON customers.c_id = orders.c_id AND customers.c_id =10001;</span><br><span class="line">+-------+-------+</span><br><span class="line">| c_id  | o_num |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 10001 | 30001 |</span><br><span class="line">| 10001 | 30005 |</span><br><span class="line">+-------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询结果作为外层另一个查询的过滤条件。</p>
<p>常用操作符ANY(SOME)\ALL\IN\EXISTS</p>
<p>ANY\SOME表示满足其中任一条件，只要满足内层子查询的任何一个比较条件，就返回一个结果作为外层查询的条件。  </p>
<p><strong>ANY关键字接在一个比较操作符后面，表示若与子查询返回的任何值比较为TRUE，则返回TRUE</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO tb11 values(1),(5),(13),(27);</span><br><span class="line">Query OK, 4 rows affected (0.00 sec)</span><br><span class="line">Records: 4  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO tb12 values(6),(14),(11),(20);</span><br><span class="line">Query OK, 4 rows affected (0.00 sec)</span><br><span class="line">Records: 4  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT num1 FROM tb11 WHERE num1 &gt; ANY (SELECT num2 FROM tb12);</span><br><span class="line">+------+</span><br><span class="line">| num1 |</span><br><span class="line">+------+</span><br><span class="line">|   13 |</span><br><span class="line">|   27 |</span><br><span class="line">+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ALL需要同时满足所有内层查询的条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT num1 FROM tb11 WHERE num1 &gt; ALL (SELECT num2 FROM tb12);</span><br><span class="line">+------+</span><br><span class="line">| num1 |</span><br><span class="line">+------+</span><br><span class="line">|   27 |</span><br><span class="line">+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>EXISTS关键字后面参数是任意一个子查询，系统对子查询进行运算以判断它是否返回行，如果至少返回一行，则结果为true,此时外层查询语句将进行查询。</p>
<p>查询suppliers表中是否存在s_id=107的供应商，如果存在，则查询fruits表中的记录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits WHERE EXISTS (SELECT s_name FROM suppliers WHERE s_id = 107);</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| f_id | s_id | f_name    | f_price |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| a1   |  101 | apple     |    5.20 |</span><br><span class="line">| a2   |  103 | apricot   |    2.20 |</span><br><span class="line">| b1   |  101 | blckberry |   10.20 |</span><br><span class="line">| b2   |  104 | berry     |    7.60 |</span><br><span class="line">| b5   |  107 | xxxx      |    3.60 |</span><br><span class="line">| bs1  |  102 | orange    |   11.30 |</span><br><span class="line">| bs2  |  105 | melon     |    8.20 |</span><br><span class="line">| c0   |  101 | cherry    |    3.20 |</span><br><span class="line">| l2   |  104 | lemon     |    6.40 |</span><br><span class="line">| m1   |  106 | mango     |   15.60 |</span><br><span class="line">| m2   |  105 | xbabay    |    2.60 |</span><br><span class="line">| m3   |  105 | xxtt      |   11.60 |</span><br><span class="line">| o2   |  103 | cocount   |    9.20 |</span><br><span class="line">| t1   |  102 | banana    |   10.30 |</span><br><span class="line">| t2   |  102 | grape     |    5.30 |</span><br><span class="line">| t4   |  107 | xbababa   |    3.60 |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询suppliers表中是否存在s_id = 107的供应商，如果存在，则查询fruits表中的f_price大于10.20的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits WHERE f_price&gt;10.20 AND EXISTS (SELECT s_name FROM suppliers WHERE s_id = 107);</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">| f_id | s_id | f_name | f_price |</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">| bs1  |  102 | orange |   11.30 |</span><br><span class="line">| m1   |  106 | mango  |   15.60 |</span><br><span class="line">| m3   |  105 | xxtt   |   11.60 |</span><br><span class="line">| t1   |  102 | banana |   10.30 |</span><br><span class="line">+------+------+--------+---------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>EXISTS和NOT EXISTS的结果只取决于是否会返回行，而不取决于这些行的内容。</p>
<hr>
<p>带IN关键字的子查询</p>
<p>在orderitems表中查询f_id为c0的订单号，并根据订单号查询具有订单号的客户c_id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT c_id FROM orders WHERE o_num IN (SELECT o_num FROM orderitems WHERE f_id = &apos;c0&apos;);</span><br><span class="line">+-------+</span><br><span class="line">| c_id  |</span><br><span class="line">+-------+</span><br><span class="line">| 10004 |</span><br><span class="line">| 10001 |</span><br><span class="line">+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>UNION关键字可以给出多条SELECT语句，并将它们的结果组合成单个结果集，合并时，两个表对应的列数和数据类型必须相同。</p>
<p>SELECT语句之间使用UNION （执行的时候删除重复记录）和 UNION ALL（不删除重复行也不对结果进行重复排序）分隔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT s_id,f_name,f_price FROM fruits WHERE f_price &lt; 9.0 UNION ALL SELECT s_id,f_name,f_price FROM fruits WHERE s_id IN (101,103);</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">| s_id | f_name    | f_price |</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">|  101 | apple     |    5.20 |</span><br><span class="line">|  103 | apricot   |    2.20 |</span><br><span class="line">|  104 | berry     |    7.60 |</span><br><span class="line">|  107 | xxxx      |    3.60 |</span><br><span class="line">|  105 | melon     |    8.20 |</span><br><span class="line">|  101 | cherry    |    3.20 |</span><br><span class="line">|  104 | lemon     |    6.40 |</span><br><span class="line">|  105 | xbabay    |    2.60 |</span><br><span class="line">|  102 | grape     |    5.30 |</span><br><span class="line">|  107 | xbababa   |    3.60 |</span><br><span class="line">|  101 | apple     |    5.20 |</span><br><span class="line">|  103 | apricot   |    2.20 |</span><br><span class="line">|  101 | blckberry |   10.20 |</span><br><span class="line">|  101 | cherry    |    3.20 |</span><br><span class="line">|  103 | cocount   |    9.20 |</span><br><span class="line">+------+-----------+---------+</span><br><span class="line">15 rows in set (0.06 sec)</span><br></pre></td></tr></table></figure>
<p>确定查询结果中不会有重复数据或者不需要去掉重复数据的时候，使用UNION ALL以提高查询效率</p>
<p>分别取别名，并进行连接查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT c.c_id,o.o_num FROM customers AS c LEFT OUTER JOIN orders AS o ON c.c_id=o.c_id;</span><br><span class="line">+-------+-------+</span><br><span class="line">| c_id  | o_num |</span><br><span class="line">+-------+-------+</span><br><span class="line">| 10001 | 30001 |</span><br><span class="line">| 10003 | 30002 |</span><br><span class="line">| 10004 | 30003 |</span><br><span class="line">| 10001 | 30005 |</span><br><span class="line">| 10002 |  NULL |</span><br><span class="line">+-------+-------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>表、字段别名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT CONCAT(TRIM(s_name),&apos;(&apos;,TRIM(s_city),&apos;)&apos;) AS suppliers_title FROM suppliers ORDER BY s_name;</span><br><span class="line">+-------------------------+</span><br><span class="line">| suppliers_title         |</span><br><span class="line">+-------------------------+</span><br><span class="line">| ACME(Shanghai)          |</span><br><span class="line">| DK Inc(Zhengzhou)       |</span><br><span class="line">| FastFruit Inc.(Tianjin) |</span><br><span class="line">| FNK Inc.(Zhongshan)     |</span><br><span class="line">| Good Set.(Taiyuang)     |</span><br><span class="line">| Just Eat Ours(Beijing)  |</span><br><span class="line">| LT Supplies(Chongqing)  |</span><br><span class="line">+-------------------------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>匹配文本的开始字符</td>
<td>‘^b’匹配以字母b开头的字符串</td>
</tr>
<tr>
<td>$</td>
<td>匹配文本的结束字符</td>
<td>‘st$’匹配以st结尾的字符串</td>
</tr>
<tr>
<td>.</td>
<td>匹配任何单个字符</td>
<td>‘b.t’匹配任何b和t之间有一个字符</td>
</tr>
<tr>
<td>*</td>
<td>匹配零个或多个在它前面的字符</td>
<td>‘f*n’匹配字符n前面有任意个字符f</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的字符一次或多次</td>
<td>‘ba+’匹配以b开头后面紧跟至少有一个a</td>
</tr>
<tr>
<td>&lt;字符串&gt;</td>
<td>匹配包含指定字符串的文本</td>
<td>‘fa’</td>
</tr>
<tr>
<td>[字符集合]</td>
<td>匹配字符集合中的任意一个字符</td>
<td>‘[xz]’匹配x或者z</td>
</tr>
<tr>
<td>[^]</td>
<td>匹配不在括号中的任何字符</td>
<td>‘[^abc]’匹配任何不包含a,b,c的字符串</td>
</tr>
<tr>
<td>字符串{n,}</td>
<td>匹配前面的字符串至少n次</td>
<td>b{2}匹配2个或更多的b</td>
</tr>
<tr>
<td>字符串{n,m}</td>
<td>匹配前面的字符串至少n次，至多m次。如果n为0，此参数为可选参数</td>
<td>b[2,4]匹配最少2个，最多4个b</td>
</tr>
</tbody>
</table>
<p>查询f_name字段以字母’y’结尾的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM fruits WHERE f_name REGEXP &apos;y$&apos;;</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| f_id | s_id | f_name    | f_price |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">| b1   |  101 | blckberry |   10.20 |</span><br><span class="line">| b2   |  104 | berry     |    7.60 |</span><br><span class="line">| c0   |  101 | cherry    |    3.20 |</span><br><span class="line">| m2   |  105 | xbabay    |    2.60 |</span><br><span class="line">+------+------+-----------+---------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>综合案例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc dept;</span><br><span class="line">+------------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field      | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+------------+--------------+------+-----+---------+----------------+</span><br><span class="line">| d_no       | int(11)      | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| d_name     | varchar(50)  | YES  |     | NULL    |                |</span><br><span class="line">| d_location | varchar(100) | YES  |     | NULL    |                |</span><br><span class="line">+------------+--------------+------+-----+---------+----------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type         | Null | Key | Default | Extra |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| e_no     | int(11)      | NO   | PRI | NULL    |       |</span><br><span class="line">| e_name   | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_gender | char(2)      | NO   |     | NULL    |       |</span><br><span class="line">| dept_no  | int(11)      | NO   | MUL | NULL    |       |</span><br><span class="line">| e_job    | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_salary | smallint(6)  | NO   |     | NULL    |       |</span><br><span class="line">| hireDate | date         | YES  |     | NULL    |       |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>1.计算所有女员工f的年龄</p>
<p>查找出所有的女员工</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type         | Null | Key | Default | Extra |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| e_no     | int(11)      | NO   | PRI | NULL    |       |</span><br><span class="line">| e_name   | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_gender | char(2)      | NO   |     | NULL    |       |</span><br><span class="line">| dept_no  | int(11)      | NO   | MUL | NULL    |       |</span><br><span class="line">| e_job    | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_salary | smallint(6)  | NO   |     | NULL    |       |</span><br><span class="line">| hireDate | date         | YES  |     | NULL    |       |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>使用LIMIT查询从第3条记录开始到第6条记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type         | Null | Key | Default | Extra |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| e_no     | int(11)      | NO   | PRI | NULL    |       |</span><br><span class="line">| e_name   | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_gender | char(2)      | NO   |     | NULL    |       |</span><br><span class="line">| dept_no  | int(11)      | NO   | MUL | NULL    |       |</span><br><span class="line">| e_job    | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| e_salary | smallint(6)  | NO   |     | NULL    |       |</span><br><span class="line">| hireDate | date         | YES  |     | NULL    |       |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询销售人员（SALSEMAN）的最低工资</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO employee</span><br><span class="line">    -&gt; VALUES (1001,&apos;SMITH&apos;,&apos;m&apos;,20,&apos;CLERK&apos;,800,&apos;2005-11-12&apos;),</span><br><span class="line">    -&gt;  (1002,&apos;ALLEN&apos;,&apos;f&apos;,30,&apos;SALESMAN&apos;,1600,&apos;2003-05-12&apos;),</span><br><span class="line">    -&gt;  (1003,&apos;WARD&apos;,&apos;f&apos;,30,&apos;SALESMAN&apos;,1250,&apos;2003-05-12&apos;),</span><br><span class="line">    -&gt;  (1004,&apos;JONES&apos;,&apos;m&apos;,20,&apos;MANAGER&apos;,2975,&apos;1998-05-18&apos;),</span><br><span class="line">    -&gt;  (1005,&apos;MARTIN&apos;,&apos;m&apos;,30,&apos;SALESMAN&apos;,1250,&apos;2001-06-12&apos;),</span><br><span class="line">    -&gt;  (1006,&apos;BLAKE&apos;,&apos;f&apos;,30,&apos;MANAGER&apos;,2850,&apos;1997-02-15&apos;),</span><br><span class="line">    -&gt;  (1007,&apos;CLARK&apos;,&apos;m&apos;,10,&apos;MANAGER&apos;,2450,&apos;2002-09-12&apos;),</span><br><span class="line">    -&gt;  (1008,&apos;SCOTT&apos;,&apos;m&apos;,20,&apos;ANALYST&apos;,3000,&apos;2003-05-12&apos;),</span><br><span class="line">    -&gt;  (1009,&apos;KING&apos;,&apos;f&apos;,10,&apos;PRESIDENT&apos;,5000,&apos;1995-01-01&apos;),</span><br><span class="line">    -&gt;  (1010,&apos;TURNER&apos;,&apos;f&apos;,30,&apos;SALESMAN&apos;,1500,&apos;1997-10-12&apos;),</span><br><span class="line">    -&gt;  (1011,&apos;ADAMS&apos;,&apos;m&apos;,20,&apos;CLERK&apos;,1100,&apos;1999-10-05&apos;),</span><br><span class="line">    -&gt;  (1012,&apos;JAMES&apos;,&apos;m&apos;,30,&apos;CLERK&apos;,950,&apos;2008-06-15&apos;);</span><br><span class="line">Query OK, 12 rows affected (0.01 sec)</span><br><span class="line">Records: 12  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT MIN(e_salary) FROM employee WHERE e_job = &apos;SALESMAN&apos;;</span><br><span class="line">+---------------+</span><br><span class="line">| MIN(e_salary) |</span><br><span class="line">+---------------+</span><br><span class="line">|          1250 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询名字以字母N或者S结尾的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM employee WHERE e_name REGEXP &apos;[N,S]$&apos;;</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| e_no | e_name | e_gender | dept_no | e_job    | e_salary | hireDate   |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| 1002 | ALLEN  | f        |      30 | SALESMAN |     1600 | 2003-05-12 |</span><br><span class="line">| 1004 | JONES  | m        |      20 | MANAGER  |     2975 | 1998-05-18 |</span><br><span class="line">| 1005 | MARTIN | m        |      30 | SALESMAN |     1250 | 2001-06-12 |</span><br><span class="line">| 1011 | ADAMS  | m        |      20 | CLERK    |     1100 | 1999-10-05 |</span><br><span class="line">| 1012 | JAMES  | m        |      30 | CLERK    |      950 | 2008-06-15 |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询在BeiJing工作的员工的姓名和职务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT e_name,e_job FROM employee WHERE dept_no IN (SELECT d_no FROM dept WHERE d_location = &apos;BeiJing&apos;);</span><br><span class="line">+--------+---------+</span><br><span class="line">| e_name | e_job   |</span><br><span class="line">+--------+---------+</span><br><span class="line">| SMITH  | CLERK   |</span><br><span class="line">| JONES  | MANAGER |</span><br><span class="line">| SCOTT  | ANALYST |</span><br><span class="line">| ADAMS  | CLERK   |</span><br><span class="line">+--------+---------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>使用左连接方式查询employee表和dept表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM employee LEFT OUTER JOIN dept ON dept.d_no = employee.dept_no;</span><br><span class="line">+------+--------+----------+---------+-----------+----------+------------+------+------------+------------+</span><br><span class="line">| e_no | e_name | e_gender | dept_no | e_job     | e_salary | hireDate   | d_no | d_name     | d_location |</span><br><span class="line">+------+--------+----------+---------+-----------+----------+------------+------+------------+------------+</span><br><span class="line">| 1007 | CLARK  | m        |      10 | MANAGER   |     2450 | 2002-09-12 |   10 | ACCOUNTING | ShangHai   |</span><br><span class="line">| 1009 | KING   | f        |      10 | PRESIDENT |     5000 | 1995-01-01 |   10 | ACCOUNTING | ShangHai   |</span><br><span class="line">| 1001 | SMITH  | m        |      20 | CLERK     |      800 | 2005-11-12 |   20 | RESEARCH   | BeiJing    |</span><br><span class="line">| 1004 | JONES  | m        |      20 | MANAGER   |     2975 | 1998-05-18 |   20 | RESEARCH   | BeiJing    |</span><br><span class="line">| 1008 | SCOTT  | m        |      20 | ANALYST   |     3000 | 2003-05-12 |   20 | RESEARCH   | BeiJing    |</span><br><span class="line">| 1011 | ADAMS  | m        |      20 | CLERK     |     1100 | 1999-10-05 |   20 | RESEARCH   | BeiJing    |</span><br><span class="line">| 1002 | ALLEN  | f        |      30 | SALESMAN  |     1600 | 2003-05-12 |   30 | SALES      | ShenZhen   |</span><br><span class="line">| 1003 | WARD   | f        |      30 | SALESMAN  |     1250 | 2003-05-12 |   30 | SALES      | ShenZhen   |</span><br><span class="line">| 1005 | MARTIN | m        |      30 | SALESMAN  |     1250 | 2001-06-12 |   30 | SALES      | ShenZhen   |</span><br><span class="line">| 1006 | BLAKE  | f        |      30 | MANAGER   |     2850 | 1997-02-15 |   30 | SALES      | ShenZhen   |</span><br><span class="line">| 1010 | TURNER | f        |      30 | SALESMAN  |     1500 | 1997-10-12 |   30 | SALES      | ShenZhen   |</span><br><span class="line">| 1012 | JAMES  | m        |      30 | CLERK     |      950 | 2008-06-15 |   30 | SALES      | ShenZhen   |</span><br><span class="line">+------+--------+----------+---------+-----------+----------+------------+------+------------+------------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查询所有2001-2005年入职的员工的信息，查询部门编号为20和30的员工信息并使用UNION合并两个查询结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM employee WHERE YEAR(hireDate) BETWEEN &apos;2001&apos; and &apos;2005&apos; UNION ALL SELECT * FROM employee WHERE dept_no IN (20,30) ; </span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| e_no | e_name | e_gender | dept_no | e_job    | e_salary | hireDate   |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| 1001 | SMITH  | m        |      20 | CLERK    |      800 | 2005-11-12 |</span><br><span class="line">| 1002 | ALLEN  | f        |      30 | SALESMAN |     1600 | 2003-05-12 |</span><br><span class="line">| 1003 | WARD   | f        |      30 | SALESMAN |     1250 | 2003-05-12 |</span><br><span class="line">| 1005 | MARTIN | m        |      30 | SALESMAN |     1250 | 2001-06-12 |</span><br><span class="line">| 1007 | CLARK  | m        |      10 | MANAGER  |     2450 | 2002-09-12 |</span><br><span class="line">| 1008 | SCOTT  | m        |      20 | ANALYST  |     3000 | 2003-05-12 |</span><br><span class="line">| 1001 | SMITH  | m        |      20 | CLERK    |      800 | 2005-11-12 |</span><br><span class="line">| 1002 | ALLEN  | f        |      30 | SALESMAN |     1600 | 2003-05-12 |</span><br><span class="line">| 1003 | WARD   | f        |      30 | SALESMAN |     1250 | 2003-05-12 |</span><br><span class="line">| 1004 | JONES  | m        |      20 | MANAGER  |     2975 | 1998-05-18 |</span><br><span class="line">| 1005 | MARTIN | m        |      30 | SALESMAN |     1250 | 2001-06-12 |</span><br><span class="line">| 1006 | BLAKE  | f        |      30 | MANAGER  |     2850 | 1997-02-15 |</span><br><span class="line">| 1008 | SCOTT  | m        |      20 | ANALYST  |     3000 | 2003-05-12 |</span><br><span class="line">| 1010 | TURNER | f        |      30 | SALESMAN |     1500 | 1997-10-12 |</span><br><span class="line">| 1011 | ADAMS  | m        |      20 | CLERK    |     1100 | 1999-10-05 |</span><br><span class="line">| 1012 | JAMES  | m        |      30 | CLERK    |      950 | 2008-06-15 |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br></pre></td></tr></table></figure>
<p>使用LIKE 查询员工姓名中包含字母a的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM employee WHERE e_name LIKE &apos;%a%&apos;;</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| e_no | e_name | e_gender | dept_no | e_job    | e_salary | hireDate   |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br><span class="line">| 1002 | ALLEN  | f        |      30 | SALESMAN |     1600 | 2003-05-12 |</span><br><span class="line">| 1003 | WARD   | f        |      30 | SALESMAN |     1250 | 2003-05-12 |</span><br><span class="line">| 1005 | MARTIN | m        |      30 | SALESMAN |     1250 | 2001-06-12 |</span><br><span class="line">| 1006 | BLAKE  | f        |      30 | MANAGER  |     2850 | 1997-02-15 |</span><br><span class="line">| 1007 | CLARK  | m        |      10 | MANAGER  |     2450 | 2002-09-12 |</span><br><span class="line">| 1011 | ADAMS  | m        |      20 | CLERK    |     1100 | 1999-10-05 |</span><br><span class="line">| 1012 | JAMES  | m        |      30 | CLERK    |      950 | 2008-06-15 |</span><br><span class="line">+------+--------+----------+---------+----------+----------+------------+</span><br></pre></td></tr></table></figure>
<p>使用REGEXP查询员工姓名中包含T、C或者M3个字母中任意一个的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT e_name FROM employee WHERE e_name REGEXP &apos;[TCM]&apos; ;</span><br><span class="line">+--------+</span><br><span class="line">| e_name |</span><br><span class="line">+--------+</span><br><span class="line">| SMITH  |</span><br><span class="line">| MARTIN |</span><br><span class="line">| CLARK  |</span><br><span class="line">| SCOTT  |</span><br><span class="line">| TURNER |</span><br><span class="line">| ADAMS  |</span><br><span class="line">| JAMES  |</span><br><span class="line">+--------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

"""
print(Tomd(html).markdown)